<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

    <style>
        .price {
            color: coral;
            border: 1px solid #2e2e2e;
            padding: 8px;
            border-radius: 5px;
        }
    </style>
</head>
<body>

    <nav class="navbar navbar-inverse">
        <div class="container">
            <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">Bootstrap theme</a>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li class="active"><a href="#">Home</a></li>
                <li><a href="#about">About</a></li>
                <li><a href="#contact">Contact</a></li>
                <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Dropdown <span class="caret"></span></a>
                <ul class="dropdown-menu">
                    <li><a href="#">Action</a></li>
                    <li><a href="#">Another action</a></li>
                    <li><a href="#">Something else here</a></li>
                    <li role="separator" class="divider"></li>
                    <li class="dropdown-header">Nav header</li>
                    <li><a href="#">Separated link</a></li>
                    <li><a href="#">One more separated link</a></li>
                </ul>
                </li>
            </ul>
            </div><!--/.nav-collapse -->
        </div>
    </nav>

    <div class="container-fluid" style="margin-bottom: 100px">
        <div class="row">
            <div class="col-md-3">
                <ul class="list-group">
                    <li class="list-group-item active">Danh muc</li>
                    <li class="list-group-item">Second item</li>
                    <li class="list-group-item">Third item</li>
                    <li class="list-group-item">Third item</li>
                    <li class="list-group-item">Third item</li>
                    <li class="list-group-item">Third item</li>
                    <li class="list-group-item">Third item</li>
                    <li class="list-group-item">Third item</li>
                    <li class="list-group-item">Third item</li>
                </ul>
            </div>
            <div class="col-md-9">
                <div class="row">
                    <div class="col-sm-6 col-md-4 " id="pro-1">
                        <div class="thumbnail">
                            <img width="300" height="300" src="image/hp.png" alt="...">
                            <div class="caption">
                                <h3 class="product-name">Laptop HP</h3>
                                
                                <p>
                                    <button id="product-1" href="#" class="btn btn-primary" role="button">Add to cart</button> 
                                    <a class="price" href="#" class="btn btn-default" role="button">12000000</a>
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 col-md-4" id="pro-2">
                        <div class="thumbnail">
                        <img width="300" height="300" src="image/huawei.jpg" alt="...">
                        <div class="caption">
                            <h3 class="product-name">Dien thoai huawei tau khua</h3>
                    
                            <p>
                                <button id="product-2" href="#" class="btn btn-primary" role="button">Add to cart</button> 
                                <a class="price" href="#" class="btn btn-default" role="button">13000000</a>
                            </p>
                        </div>
                        </div>
                    </div>
                    <div class="col-sm-6 col-md-4" id="pro-3">
                        <div class="thumbnail">
                        <img width="300" height="300" src="image/iphone4.jpeg" alt="...">
                        <div class="caption">
                            <h3 class="product-name">Dien thoai Iphone 4 cao cap</h3>
                        
                            <p>
                                <button id="product-3" href="#" class="btn btn-primary" role="button">Add to cart</button> 
                                <a class="price" href="#" class="btn btn-default" role="button">34000000</a>
                            </p>
                        </div>
                        </div>
                    </div>
                    <div class="col-sm-6 col-md-4" id="pro-4">
                        <div class="thumbnail">
                            <img width="300" height="300" src="image/oppo.jpg" alt="...">
                            <div class="caption">
                                <h3 class="product-name">Dien thoai oppo AI</h3>
                            
                                <p>
                                        <button id="product-4" href="#" class="btn btn-primary" role="button">Add to cart</button> 
                                        <a class="price" href="#" class="btn btn-default" role="button">9800000</a>
                                    </p>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 col-md-4" id="pro-5">
                        <div class="thumbnail">
                            <img width="300" height="300" src="image/samsung.jpeg" alt="...">
                            <div class="caption">
                                <h3 class="product-name">Galaxy not2 3</h3>
                            
                                <p>
                                    <button id="product-5" href="#" class="btn btn-primary" role="button">Add to cart</button> 
                                    <a class="price" href="#" class="btn btn-default" role="button">14500000</a>
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 col-md-4" id="pro-6">
                        <div class="thumbnail">
                            <img width="300" height="300" src="image/ss-not9.png" alt="...">
                            <div class="caption">
                                <h3 class="product-name">Dien thoai samsung not 9</h3>
                        
                                <p>
                                        <button id="product-6" href="#" class="btn btn-primary" role="button">Add to cart</button> 
                                        <a class="price" href="#" class="btn btn-default" role="button">15650000</a>
                                </p>
                            </div>
                        </div>
                    </div>
                        <div class="col-sm-6 col-md-4" id="pro-7">
                            <div class="thumbnail">
                                <img width="300" height="300" src="image/macbook.jpg" alt="...">
                                <div class="caption">
                                    <h3 class="product-name">Macbook cao cap 2017</h3>
                                
                                    <p>
                                            <button id="product-7" href="#" class="btn btn-primary" role="button">Add to cart</button> 
                                            <a class="price" href="#" class="btn btn-default" role="button">11200000</a>
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-md-4" id="pro-8">
                            <div class="thumbnail">
                                <img width="300" height="300" src="image/dell.jpg" alt="...">
                                <div class="caption">
                                    <h3 class="product-name">Laptop Dell LED</h3>
                        
                                    <p>
                                            <button id="product-8" href="#" class="btn btn-primary" role="button">Add to cart</button> 
                                            <a class="price" href="#" class="btn btn-default" role="button">8900000</a>
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-md-4" id="pro-9">
                            <div class="thumbnail">
                                <img width="300" height="300" src="image/macbook.jpg" alt="...">
                                <div class="caption">
                                    <h3 class="product-name">Macbook sieu mong 2019</h3>
                                
                                    <p>
                                        <button id="product-9" href="#" class="btn btn-primary" role="button">Add to cart</button> 
                                        <a id="p-9"  class="price" href="#" class="btn btn-default" role="button">21500000</a>
                                    </p>
                                </div>
                            </div>
                        </div>
                </div>
            </div>
        </div>

        <div class="container-fluid">
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th>ProductID</th>
                        <th>Ten San Pham</th>
                        <th>Hinh Anh</th>
                        <th>Gia ban</th>
                        <th>So Luong</th>
                        <th>Tong cong</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1</td>
                        <td>Iphone 5</td>
                        <td><img width="150" src="image/iphone4.jpeg" alt=""></td>
                        <td>12000000</td>
                        <td><input type="number" value="1"></td>
                        <td>12000000</td>
                    </tr>
                </tbody>
            </table>
        </div>

    </div>



<script>
    var cart = [];

    $(document).ready(function(){
        $("button").click(function(){
            var numId = this.id;
            var x = numId.split('');
            var productId = x.pop();
            var product_id = "pro-"+productId;
            var proName = $("#pro-"+productId).find('.product-name').text();
            var proImgUrl = $("#pro-"+productId).find('img').attr('src');
            var proPrice = $("#pro-"+productId).find('.price').text();

            var product = {
                id: productId,
                code: product_id,
                name: proName,
                image: proImgUrl,
                price: proPrice
            };

            //1. check xem san pham da ton tai trong gio hang
            var flag = false;
            for(var i = 0; i < cart.length; i++){
                if(cart[i].id == product.id){
                    flag = true;
                    break;
                }
            }
            //2. truong hop chua co trong gio hang
            if(flag === false){
               product.quantity = 1;
               cart.push(product);
            }else {
                //3. truong hop da co trong gio hang 
                cart[i].quantity += 1;
            }
            //debugger
            checkout();
            ///ham checkout 
            
        })

    })
        function checkout(){
            $("tbody").empty();
            var checkoutUnit = "";
            var totalMoney = 0;
            for(var i = 0; i < cart.length; i++){
                totalMoney += cart[i].price * cart[i].quantity;
                checkoutUnit += `
                    <tr>
                        <td>${cart[i].code}</td>
                        <td>${cart[i].name}</td>
                        <td><img width="150" src="${cart[i].image}" alt=""></td>
                        <td>${cart[i].price}</td>
                        <td>
                            <input onchange="changeUnit(this, ${cart[i].id})" type="number" value="${cart[i].quantity}">
                            <button onclick="removeProduct(${cart[i].id})">X</button>
                        </td>
                        <td>${cart[i].price * cart[i].quantity}</td>
                    </tr>
                
                `;
            }
            checkoutUnit += `
                    <tr>
                        <td>Tong Cong</td>
                        <td colspan="4">Co (${cart.length}) SP trong Gio hang</td>
                        <td ><strong>${totalMoney}</strong></td>
                    </tr>
            `;
            $("tbody").append(checkoutUnit);
        }

        function removeProduct(id){
            for(var i = 0; i < cart.length; i++){
                if(cart[i].id == id){
                    cart.splice(i, 1);
                    break;
                }
            }
            checkout();
        }

        function changeUnit(e, id){
            var inputValue = e.value;
            if(inputValue > 0){
                for(var i = 0; i < cart.length; i++){
                    if(cart[i].id == id){
                        cart[i].quantity = inputValue;
                        break;
                    }
                }
                checkout();
            }else {
                removeProduct(id);
            }
        }
    

</script>
</body>
</html>